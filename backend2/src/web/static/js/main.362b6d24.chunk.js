(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{131:function(e,t){},136:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(10),c=a.n(r),o=a(28),i=a(11),m=a(13);var u=function(e,t){var a=Object(n.useState)((function(){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):(window.localStorage.setItem(e,JSON.stringify(t)),t)}catch(n){return console.log(n),t}})),l=Object(m.a)(a,2),r=l[0],c=l[1];return[r,function(t){try{var a=t instanceof Function?t(r):t;c(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(n){console.log(n)}},function(){try{window.localStorage.removeItem(e)}catch(t){console.log(t)}}]},s=(a(93),a(173)),E=a(174),d=a(175),g=a(169),f=a(176),v=a(181),y=a(177);function h(){var e=u("userName",""),t=Object(m.a)(e,2),a=t[0],r=t[1],c=u("gameKey",""),o=Object(m.a)(c,2),h=o[0],p=o[1],x=!a||h.length>0,b=!a||h.length<4,O=Object(i.e)(),S=function(){var e=Object(i.f)();return new URLSearchParams(e.search)}();Object(n.useEffect)((function(){S.get("gameKey")&&p(S.get("gameKey"))}),[]);return l.a.createElement(g.a,{maxWidth:"md"},l.a.createElement(s.a,{position:"fixed"},l.a.createElement(E.a,{style:{display:"flex"}},l.a.createElement(d.a,{variant:"h6",style:{flex:1,textAlign:"center"}},"Interrogate the Intruder"))),l.a.createElement(E.a,null),l.a.createElement(f.a,{container:!0,spacing:2,style:{marginTop:8}},l.a.createElement(f.a,{item:!0,xs:12},l.a.createElement(d.a,{variant:"h6"},"Who are you?"),l.a.createElement(v.a,{label:"Name",fullWidth:!0,autoFocus:!0,value:a,onChange:function(e){return r(e.target.value)}})),l.a.createElement(f.a,{item:!0,xs:12},l.a.createElement(d.a,{variant:"h6"},"Join an existing game"),l.a.createElement(v.a,{label:"Game Code",fullWidth:!0,value:h,onChange:function(e){return p(e.target.value)}})),l.a.createElement(f.a,{item:!0,xs:12},l.a.createElement(y.a,{variant:"outlined",color:"primary",fullWidth:!0,disabled:b,onClick:function(){b||O.push("/game")}},"Join Game")),l.a.createElement(f.a,{item:!0,xs:12},l.a.createElement(y.a,{variant:"outlined",fullWidth:!0,disabled:x,onClick:function(){p("NEW"),O.push("/game")}},"New Game"))))}var p=a(180),x=a(74),b=a.n(x),O="connect",S="join",T="GAME_UPDATE",j="CHANGE_STATE",I=a(182);function w(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(n.useState)(e),a=Object(m.a)(t,2),l=a[0],r=a[1],c=function(e){r("boolean"===typeof e?e:function(e){return!e})};return[l,c]}var G,N={LOBBY:"LOBBY",STARTING:"STARTING",IN_PROGRESS:"IN_PROGRESS",TIME_UP:"TIME_UP"},k=a(179),A=a(178),L=a(137),R=a(75),C=a.n(R);function B(e){var t=e.children;return l.a.createElement(l.a.Fragment,null,l.a.createElement(s.a,{position:"fixed"},l.a.createElement(E.a,{style:{display:"flex"}},l.a.createElement(d.a,{variant:"h6",style:{flex:1,textAlign:"center"}},"Interrogate the Intruder"))),l.a.createElement(E.a,null),t)}function K(){var e=u("userName"),t=Object(m.a)(e,1)[0],a=u("userId"),r=Object(m.a)(a,1)[0],c=u("gameKey"),o=Object(m.a)(c,3),s=o[0],E=o[1],d=o[2],g=Object(n.useState)(null),f=Object(m.a)(g,2),v=f[0],y=f[1],h=Object(i.e)(),p=function(){G.disconnect(),d(),h.push("/")};Object(n.useEffect)((function(){v&&E(v.gameKey)}),[v,E]),Object(n.useEffect)((function(){return r||t||p(),(G=b()("/",{path:"/api/socket.io"})).on(O,(function(){console.log("joining game",{userId:r,userName:t,gameKey:s}),G.emit(S,{userId:r,userName:t,gameKey:s},(function(e){var t=e.error;t&&(alert(t),p())}))})),G.on(T,(function(e){y(e)})),function(){G.disconnect()}}),[r,t,s]);var x=w(!1),I=Object(m.a)(x,2),k=(I[0],I[1],function(){G.emit(j,{gameKey:s,gameState:N.LOBBY})});return l.a.createElement(B,null,(null===v||void 0===v?void 0:v.state)===N.LOBBY&&l.a.createElement(W,{gameKey:s,game:v,userName:t,handleLeaveGame:p,handleStartGame:function(){G.emit(j,{gameKey:s,gameState:N.STARTING})}}),(null===v||void 0===v?void 0:v.state)===N.STARTING&&l.a.createElement(P,{game:v}),(null===v||void 0===v?void 0:v.state)===N.IN_PROGRESS&&l.a.createElement(_,{game:v,handleReturnToLobby:k}),(null===v||void 0===v?void 0:v.state)===N.TIME_UP&&l.a.createElement(J,{game:v,handleReturnToLobby:k}))}function W(e){var t,a,n=e.gameKey,r=e.game,c=e.userName,o=e.handleLeaveGame,i=e.handleStartGame;return l.a.createElement(l.a.Fragment,null,l.a.createElement(g.a,{maxWidth:"md",style:{paddingTop:16,paddingBottom:16}},l.a.createElement(f.a,{container:!0,spacing:1,style:{marginTop:8}},l.a.createElement(f.a,{item:!0,xs:12},l.a.createElement(d.a,{variant:"h4"},"Welcome, Agent ",c)),l.a.createElement(f.a,{item:!0,xs:12},l.a.createElement(y.a,{onClick:function(){var e="".concat(window.location.protocol,"//").concat(window.location.host,"?gameKey=").concat(n);C()(e)}},"Game Code: ",n)),l.a.createElement(f.a,{item:!0,xs:12},l.a.createElement(d.a,{variant:"h5"},"Players")),null===r||void 0===r||null===(t=r.players)||void 0===t?void 0:t.map((function(e){var t=e.socketIds.length>0;return l.a.createElement(f.a,{item:!0,key:e.id},l.a.createElement(I.a,{label:e.name,color:t?"primary":"default"}))})),l.a.createElement(f.a,{item:!0,xs:12},l.a.createElement(d.a,{variant:"h5"},"Locations")),null===r||void 0===r||null===(a=r.locations)||void 0===a?void 0:a.map((function(e){return l.a.createElement(f.a,{item:!0,xs:6,key:e},l.a.createElement(A.a,{style:{height:"100%"}},l.a.createElement(k.a,null,l.a.createElement(d.a,{variant:"h6"},e))))})))),l.a.createElement(E.a,null),l.a.createElement(s.a,{position:"fixed",style:{top:"auto",bottom:0},color:"white"},l.a.createElement(E.a,{style:{display:"flex"}},l.a.createElement(y.a,{style:{flex:1},onClick:o},"Leave Game"),l.a.createElement(y.a,{style:{flex:1},color:"primary",variant:"contained",onClick:i},"Start Game"))))}function P(e){var t=e.game;return l.a.createElement(l.a.Fragment,null,l.a.createElement(g.a,{maxWidth:"md",style:{paddingTop:16,paddingBottom:16}},l.a.createElement(f.a,{container:!0,spacing:2},l.a.createElement(f.a,{item:!0,xs:12},l.a.createElement(d.a,{variant:"h4",style:{textAlign:"center"}},"Game starting in...")),l.a.createElement(f.a,{item:!0,xs:12},l.a.createElement(d.a,{variant:"h1",style:{textAlign:"center"}},t.timer)))))}function _(e){var t,a=e.game,r=e.handleReturnToLobby,c=u("userId"),o=Object(m.a)(c,1)[0],i=a.spyId===o?"???":a.location,v=w(!1),h=Object(m.a)(v,2),p=h[0],x=h[1],b=Object(n.useState)(new Array(a.locations.length).fill(1)),O=Object(m.a)(b,2);O[0],O[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(g.a,{maxWidth:"md",style:{paddingTop:16,paddingBottom:16}},l.a.createElement(f.a,{container:!0,spacing:2},l.a.createElement(f.a,{item:!0,xs:12},l.a.createElement(d.a,{variant:"h5"},"Timer: ",a.timer)),l.a.createElement(f.a,{item:!0,xs:12},l.a.createElement(d.a,{variant:"h5"},"Location: ",l.a.createElement(y.a,{onClick:x},p?i:"Tap To Show"))),l.a.createElement(f.a,{item:!0,xs:12},l.a.createElement(d.a,{variant:"h5"},"Locations")),null===a||void 0===a||null===(t=a.locations)||void 0===t?void 0:t.map((function(e){return l.a.createElement(f.a,{item:!0,xs:6,key:e},l.a.createElement(F,{title:e}))})))),l.a.createElement(E.a,null),l.a.createElement(s.a,{position:"fixed",style:{top:"auto",bottom:0},color:"white"},l.a.createElement(E.a,{style:{display:"flex"}},l.a.createElement("div",{style:{flex:1}}),l.a.createElement(y.a,{style:{flex:1},color:"error",variant:"contained",onClick:r},"End"))))}function F(e){var t=e.title,a=w(!0),n=Object(m.a)(a,2),r=n[0],c=n[1];return l.a.createElement(A.a,{style:{height:"100%",opacity:r?1:.3}},l.a.createElement(L.a,{onClick:c,style:{width:"100%"}},l.a.createElement(k.a,null,l.a.createElement(d.a,{variant:"h6"},t))))}function J(e){e.game;var t=e.handleReturnToLobby;return l.a.createElement(l.a.Fragment,null,l.a.createElement(g.a,{maxWidth:"md",style:{paddingTop:16,paddingBottom:16}},l.a.createElement(f.a,{container:!0,spacing:2},l.a.createElement(f.a,{item:!0,xs:12},l.a.createElement(d.a,{variant:"h4",style:{textAlign:"center"}},"Times Up!")))),l.a.createElement(E.a,null),l.a.createElement(s.a,{position:"fixed",style:{top:"auto",bottom:0},color:"white"},l.a.createElement(E.a,{style:{display:"flex"}},l.a.createElement("div",{style:{flex:1}}),l.a.createElement(y.a,{style:{flex:1},color:"error",variant:"contained",onClick:t},"End"))))}var U=function(){return l.a.createElement(o.a,null,l.a.createElement(p.a,null),l.a.createElement(i.a,{path:"/",exact:!0,component:h}),l.a.createElement(i.a,{path:"/game",exact:!0,component:K}))};c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(U,null)),document.getElementById("root"))},88:function(e,t,a){e.exports=a(136)}},[[88,1,2]]]);
//# sourceMappingURL=main.362b6d24.chunk.js.map